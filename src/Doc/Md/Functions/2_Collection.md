# Collection

- #### exists
  Returns true if there is collection element which satisfies the condition and false otherwise

  ```php
  <?php
  
  use function Fp\Collection\exists;
  
  exists([1, 2, 3], fn(int $value) => $value === 2); // true
  ```

- #### at
  Find element by its key

  O(1) for arrays and classes which implement ArrayAccess. O(N) for other cases

  ```php
  <?php
  
  use function Fp\Collection\at;
  
  /** @var Option<Foo|int> $result */
  $result = at([new Foo(), 2, 3], 1);
  ```

- #### every
  Returns true if every collection element satisfies the condition and false otherwise

  ```php
  <?php
  
  use function Fp\Collection\every;
  
  every([1, 2], fn(int $v) => $v === 1); // false
  ```

- #### filter
  Filter collection by condition. Do not preserve keys by default

  ```php
  <?php
  
  use function Fp\Collection\filter;
  
  filter([1, 2], fn(int $v): bool => $v === 2); // [2]
  ```

- #### filterNotNull
  Filter not null elements. Do not preserve keys by default

  ```php
  <?php
  
  use function Fp\Collection\filterNotNull;
  
  filterNotNull([1, null, 2]); // [1, 2]
  ```

- #### first
  Find first element which satisfies the condition

  ```php
  <?php
  
  use function Fp\Collection\first;
  
  /** @var Option<int> $result */
  $result = first([1, 2], fn(int $v): bool => $v === 2);
  ```

- #### flatMap
  Flat map Consists of map and flatten operations

  ```php
  <?php
  
  use function Fp\Collection\flatMap;
  
  /**
   * 1) map [1, 4] to [[0, 1, 2], [3, 4, 5]]
   * 2) flatten [[0, 1, 2], [3, 4, 5]] to [0, 1, 2, 3, 4, 5]
   */
  flatMap([1, 4], fn(int $x) => [$x - 1, $x, $x + 1]); // [0, 1, 2, 3, 4, 5]
  ```

- #### groupBy
  Group collection elements by key returned by function

  ```php
  <?php
  
  use function Fp\Collection\groupBy;
  
  $result = groupBy([1, 2, 3], fn(int $v): int => $v); // [1 => [1], 2 => [2], 3 => [3]] 
  ```

- #### head
  Returns collection first element

  ```php
  <?php
  
  use function Fp\Collection\head;
  
  $result = head([1, 2, 3]); // Some(1)
  $result = head([]); // None
  ```

- #### keys
  Returns list of collection keys

  ```php
  <?php
  
  use function Fp\Collection\keys;
  
  keys(['a' => 1, 'b' => 2]); // ['a', 'b']
  ```

- #### last
  Returns last collection element and None if there is no last element

  ```php
  <?php
  
  use function Fp\Collection\last;
  
  /** @var Option<int> $result */
  $result = last([1, 2, 3]);
  ```

- #### map
  Produces a new array of elements by mapping each element in collection through a transformation function (callback).

  ```php
  <?php
  
  use function Fp\Collection\map;
  
  map([1, 2, 3], fn(int $v) => (string) $v); // ['1', '2', '3']
  ```

- #### partitionT
  Divide collection by given classes

  ```php
  <?php
  
  use Tests\Mock\Foo;
  use Tests\Mock\Bar;
  use function Fp\Collection\partitionT;
  
  // inferred as array{list<Foo>, list<Bar>, list<Foo|Bar>}
  $result = partitionT(
    [new Foo(), new Bar()],
    fn($i) => $i instanceof Foo,
    fn($i) => $i instanceof Bar, 
  );
  ```

- #### pop
  Pop last collection element and return tuple containing this element and other collection elements. If there is no last element then returns None

  ```php
  <?php
  
  use function Fp\Collection\pop;
  
  [$head, $tail] = pop([1, 2, 3])->get(); // [3, [1, 2]]
  ```
  
  ```php
  <?php
  
  use Fp\Functional\Option\Option;
  use function Fp\Collection\pop;
  
  Option::do(function () use ($collection) {
    [$head, $tail] = yield pop($collection);
    return doSomethingWithHeadAndTail($head, $tail);
  })   
  ```

- #### fold
  Fold multiple elements into one. Returns None for empty collection

  ```php
  <?php
  
  use function Fp\Collection\fold;
  
  $result = fold('', ['a', 'b', 'c'])(fn($acc, string $cur) => $acc . $cur); // 'abc'
  ```

- #### reindex
  Produces a new array of elements by assigning the values to keys generated by a transformation function (callback).

  ```php
  <?php
  
  use function Fp\Collection\reindex;
  
  reindex([1, 'a' => 2], fn (int $value) => $value); // [1 => 1, 2 => 2]
  ```

- #### reverse
  Copy collection in reversed order

  ```php
  <?php
  
  use function Fp\Collection\reverse;
  
  reverse([1, 2, 3]); // [3, 2, 1]   
  ```

- #### second
  Returns second collection element. None if there is no second collection element

  ```php
  <?php
  
  use function Fp\Collection\second;
  
  second([1, 2, 3])->get(); // 2   
  ```

- #### shift
  Shift first collection element and return tuple containing this element and other collection elements. If there is no first element then returns None

  ```php
  <?php
  
  use function Fp\Collection\shift;
  
  [$head, $tail] = shift([1, 2, 3])->get(); // [1, [2, 3]]   
  ```

  ```php
  <?php
  
  use Fp\Functional\Option\Option;
  use function Fp\Collection\shift;
  
  Option::do(function () use ($collection) {
    [$head, $tail] = yield shift($collection);
    return doSomethingWithHeadAndTail($head, $tail);
  })   
  ```

- #### tail
  Returns every collection element except first

  ```php
  <?php
  
  use function Fp\Collection\tail;
  
  tail([1, 2, 3]); // [2, 3]   
  ```

- #### zip
  Returns an iterable collection formed from this iterable collection and another iterable collection by combining corresponding elements in pairs.

  If one of the two collections is longer than the other, its remaining elements are ignored.

  ```php
  <?php
  
  use function Fp\Collection\zip;
  
  zip([1, 2, 3], ['a', 'b']); // [[1, 'a'], [2, 'b']]
  ```

